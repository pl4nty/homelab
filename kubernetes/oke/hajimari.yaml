apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: hajimari
  namespace: default
spec:
  interval: 15m
  chart:
    spec:
      chart: hajimari
      sourceRef:
        kind: HelmRepository
        name: hajimari
        namespace: flux-system
  maxHistory: 3
  install:
    createNamespace: true
    remediation:
      retries: 3
  upgrade:
    cleanupOnFail: true
    remediation:
      retries: 3
  uninstall:
    keepHistory: false
  values:
    persistence:
      data:
        enabled: false
    hajimari:
      title: Tom's Lab
      showGreeting: false
      showGlobalBookmarks: true
      alwaysTargetBlank: true
      darkTheme: espresso
      lightTheme: paper
      customApps:
      - group: msft
        apps:
        - name: Azure vnet planner
          url: https://vnetplanner.tplant.com.au
        - name: Message Header Analyser
          url: https://mha.tplant.com.au
        - name: Msft Store package tools
          url: https://msft-store.tplant.com.au
        - name: Msft JWT decoder
          url: https://jwtms.tplant.com.au
        - name: WUfB deployment service
          url: https://wufb-ds.tplant.com.au
      - group: tools
        apps:
        - name: Network looking glass
          url: https://lg.tplant.com.au
        - name: CyberChef
          url: https://cyberchef.tplant.com.au
        - name: JWT decoder
          url: https://jwt.tplant.com.au
        - name: Misc IT tools
          url: https://tools.tplant.com.au
        - name: File converter
          url: https://convert.tplant.com.au
        - name: PDF editor
          url: https://pdf.tplant.com.au
      - group: games
        apps:
        - name: CS:GO
          url: steam://connect/play.tplant.com.au:27015
        - name: Factorio
          url: play.tplant.com.au:31497
        - name: Tsuro boardgame
          url: https://tsuro.tplant.com.au
      globalBookmarks:
      - group: dependencies
        bookmarks:
        - name: github
          url: https://www.githubstatus.com
          icon: simple-icons:github
        - name: renovate
          url: https://status.mend.io
          icon: simple-icons:renovatebot
        - name: backblaze
          url: https://status.backblaze.com
          icon: simple-icons:backblaze
        - name: grafana
          url: https://status.grafana.com
          icon: simple-icons:grafana
        - name: bunny.net
          url: https://status.bunny.net
          icon: logos:bunny-net-icon
        - name: cloudflare
          url: https://www.cloudflarestatus.com
          icon: simple-icons:cloudflare
        - name: aussiebb
          url: https://www.aussiebroadband.com.au/help-centre/system-outages
          icon: https://www.aussiebroadband.com.au/assets/favicons/android-icon-192x192.png
        - name: azure
          url: https://azure.status.microsoft
          icon: simple-icons:microsoftazure
        - name: oracle cloud
          url: https://ocistatus.oraclecloud.com
          icon: simple-icons:oracle
        - name: ventraip
          url: https://status.ventraip.com.au
          icon: https://ventraip.com.au/wp-content/uploads/2020/08/logo-ventraip-australia.png
      - group: utils
        bookmarks:
        - name: k8s-at-home search
          url: https://nanne.dev/k8s-at-home-search
        - name: visualise CRDs
          url: https://doc.crds.dev
        - name: msportals
          url: https://msportals.io
# ---
# apiVersion: gateway.networking.k8s.io/v1alpha2
# kind: HTTPRoute
# metadata:
#   name: hajimari
#   namespace: default
# spec:
#   parentRefs:
#   - namespace: default
#     name: traefik-gateway
#   hostnames:
#   - lab.tplant.com.au
#   rules:
#   - backendRefs:
#     - name: hajimari
#       port: 3000
#   - backendRefs:
#     - name: well-known
#       port: 8080
#     matches:
#     - path:
#         type: PathPrefix
#         value: /robots.txt
#     - path:
#         type: PathPrefix
#         value: /.well-known/
